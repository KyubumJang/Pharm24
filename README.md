# 서울의 24시간 약국 찾기 웹페이지 개발 및 데이터 분석
## 1) 프로젝트 목표 및 내용
* 이 프로젝트의 첫 번째 목표는 공공 데이터 포털의 파일 데이터와 오픈 API, 휴일지킴이약국 웹페이지의 데이터, 네이버 클라우드 플랫폼의 Maps 네이버 지도 기능을 활용하여 주말이나 밤에 아파서 24시간 운영 약국 및 연중무휴 약국을 찾는 경우에 편리하게 사용할 수 있는 웹사이트를 개발하는 것이다. 
* 전국을 대상으로 하기엔 어려움이 있기 때문에 서울로 위치를 제한한다. 서울의 24시간 운영 약국을 한눈에 볼 수 있게 하는 기능을 제공하는 것이 목표이다. 
* 두 번째 목표는 휴일지킴이약국의 웹페이지를 크롤링하여 심야 운영 및 연중무휴 운영 약국을 데이터베이스화 한 후, 심야 운영 약국의 분포도 분석, 인구대비 약국 수, 면적대비 약국 수를 분석하는 것이다. 이것을 분석하고 시각화 하고자 한다.

## 2) 주제 선정 이유 또는 이 프로젝트의 필요성
* 밤늦게 아프거나 주말에 아프면 병원에 가기 쉽지 않다. 늦은 시간에 약을 구할 수 있는 편의점은 상비약만 판매하기 때문에 약국의 처방이 필요한 경우가 있다. 이런 경우 늦은 시간이나 휴일에도 운영하는 24시간 약국을 찾게 된다. 최근에 약국이 닫은 야간 시간에 아파서 24시간 약국을 찾아본 적이 있다. 처음에는 네이버 지도에 24시간 약국, 심야운영약국으로 찾아봤지만 근처에 있는 것이 아닌 전국에 있는 약국이 목록으로 나왔다. 인터넷으로 휴일 지킴이 약국이라는 좋은 사이트라는 것을 찾았지만 도로명주소로 나와있고 정확한 위치를 파악하기 위해서 지도를 하나씩 눌러서 확인해야 하는 불편한 점이 있었다. 그리고 이번 텀프로젝트를 진행하면서 E-GEN이라는 약국 찾기 웹페이지를 찾았다. 지도를 통해 한눈에 볼 수 있었으나 운영 시간과 전화번호를 클릭해서 봐야하는 번거로움이 있었다. 따라서 이 두 웹페이지의 장점을 합쳐 지도를 통해 직관적으로 보이고, 운영시간과 전화번호 또한 한 눈에 볼 수 있는 24시간 운영 약국 찾기 웹페이지를 개발하고자 한다. 

* 24시간 운영 약국의 목적은 심야 시간대 시민의 의약품 구입 불편을 해소하기 위함이다. 수도권 외 다른 지역의 경우 인구대비, 면적대비 약국의 수가 매우 적을 것으로 예상한다. 단순히 서울의 하나의 구에 들어가도 약국이 대략 100개가 넘게 나오는데 강원도의 하나의 군에 들어가면 10개가 겨우 넘는다. 이 가설을 심야 운영 약국의 분포도 분석을 통해 검증하고 수도권 외 지역의 24시간 운영 약국의 필요성을 살펴본다.

## 3) 데이터 획득
* 주로 획득한 데이터는 공공데이터 오픈 API를 통해 약국현황을 획득하였다. 아래 이미지에서 보면 FullData 내려받기 기능이 있다. 이 OpenAPI를 사용해서 파이썬을 통해 XML파일을 받고 다시 그 파일을 CSV 데이터로 변환하여 사용하였다.
* 파이썬 크롤링을 통해 데이터를 획득하려 했으나 휴일 지킴이 약국 웹페이지의 이용약관에 휴일 지킴이 약국 정보의 수집, 가공, 이용 등 관리에 대한 저작권이 “약사회”에게 있고 이 정보 및 검색 결과를 수집한 데이터를 게시자의 사전동의없이 영리 또는 비영리 목적으로 활용 또는 재가공하여 사용할 수 없다고 나와있다. 따라서 비영리 목적으로 데이터를 활용하는 것에 대한 사용권 허가 절차를 진행했으나 답장이 없어 파이썬 크롤링을 통한 데이터 획득은 불가능하였다.
* 일단 약사회에서 관련 데이터를 크롤링하는데 승인이 나지 않았기 때문에  공공 데이터와 e-Gen 웹사이트에서 서울특별시에 해당하는 24시간 운영 약국 검색 결과를 엑셀형식으로 다운로드 받아 사용했다. 통합엑셀파일로 정리하였고, 이를 CSV 파일로 변환하여 활용하였다.
        * 서울특별시 약국현황: 총 5317개의 약국을 대상으로 데이터를 활용하였다.
* 각 구로 표현했고 각 구를 선택할 시 지도로 표현되도록 구분하였다.(강남구, 강동구, 강북구, 강서구, 관악구, 광진구, 구로구, 금천구, 노원구, 도붕구, 동대문구, 동작구, 마포구, 서대문구, 서초구, 성동구, 성북구, 송파구, 양천구, 영동포구, 용산구, 은평구, 종로구, 중구, 중랑구)
* 심야약국 현황: 총 534개의 약국을 대상으로 데이터를 활용하였다.
* 그 외 자료들은 공공 데이터 포털의 심야, 24시간, 연중무휴 약국 검색을 통한 서울특별시 강동구 관내 심야운영 및 연중무휴약국 현황, 서울특별시 강북구 휴일당번약국현황, 서울특별시 강북구 약국 현황 등의 데이터 등을 통해 획득했다.

## 4) 구현 내용 설명
### 공공데이터 API를 통한 데이터 획득
* 공공 데이터 포털의 오픈 API 전국 약국 정보 조회 서비스를 사용하였다. 파이썬을 통해 OpenAPI 약국 정보 조회 서비스를 활용하여 정보를 추출했다. 주소와 기관명, 대표전화, 진료시간(월, 화, 수, 목, 금,토, 일, 공휴일), 병원경도, 병원위도 정보를 얻었다.

* 위 코드는 공공데이터 API를 활용한 데이터 획득 과정이다. 공공데이터의 OpenAPI를 사용하려면 서비스키가 필요하다. 활용신청을 해서 얻은 키값을 API_Key에 넣어서 사용하였고 요청할 url 형식에 맞게 url과 queryParams를 작성하여 get메소드를 통해 XML을 가져오는 코드이다.
* 위 코드는 xml 파일을 csv 파일로 변환하여 파이썬 환경에서 사용하기 위한 데이터를 만드는 코드이다.
* 위 코드는 공공데이터를 통해 얻은 csv파일을 서울특별시만 뽑아 확인하는 코드이다.
* 위 코드는 사용하지 않는 칼럼을 제거하고 필요한 칼럼만 남겨놓는 코드이다. 이렇게 제거하고 각 구로 나누어 강남구, 강동구, 강북구, 강서구, 관악구, 광진구, 구로구, 금천구, 노원구, 도붕구, 동대문구, 동작구, 마포구, 서대문구, 서초구, 성동구, 성북구, 송파구, 양천구, 영동포구, 용산구, 은평구, 종로구, 중구, 중랑구를 각각 선택하면 표로 출력하는 프로그램을 만들려 했다. 하지만 이 데이터를 mysql로 데이터베이스를 구현하는데 어려움을 겪었고, 또 만든 데이터베이스를 nodejs 혹은 python flask를 통해 웹페이지에 연결하여 구동을 하는데 어려움을 겪어 주 목표인 약국 검색 기능과 지도로 표시하는 기능은 구현하지 못하였다.
* 위 코드는 심야약국.csv를 분석한 파이썬 코드이다.

## 5) 분석 결과 또는 구현 결과: 수학적/논리적 방법론을 python으로 구현하여 데이터를 분석 및 결과를 보임 (그래프 등)
* 먼저 오픈소스를 활용하여 웹페이지를 구현하였고 HTML과 CSS를 수정하여 원하는 형식으로 만들었다.

* 수집한 데이터를 파이썬을 통해 가공하고 분석하였고 이를 그래프를 통해 시각화하였다.

## 6) 결론: 프로젝트 목표를 이루었는지, 본인의 명제/논리가 증명/확인 되었는지 구체적으로 서술

* 이 프로젝트의 첫 번째 목표는 공공 데이터 포털의 파일 데이터와 오픈 API, 휴일지킴이약국 웹페이지의 데이터를 활용하여 주말이나 밤에 아파서 24시간 운영 약국 및 연중무휴 약국을 찾는 경우에 편리하게 사용할 수 있는 웹사이트를 개발하는 것이었다. 공공데이터를 활용하여 데이터를 수집하고 이를 가공하여 웹페이지의 틀 HTML, CSS, JS를 통해 구현하였다. 하지만 파이썬 크롤링을 공부한 것을 사용하지 못하였고 이로 인해 시간 분배의 문제를 겪었다. 

* 전국을 대상으로 하기엔 어려움이 있기 때문에 서울로 위치를 제한한다. 서울의 24시간 운영 약국을 한눈에 볼 수 있게 하는 기능을 제공하는 것이 목표이다. 네이버 클라우드 플랫폼의 Maps 네이버 지도 기능을 활용하여 제공하는 것이 목표였는데 이는 시도하지 못했다.

* 두 번째 목표는 휴일지킴이약국의 웹페이지를 크롤링하여 심야 운영 및 연중무휴 운영 약국을 데이터베이스화 한 후, 심야 운영 약국의 분포도 분석, 인구대비 약국 수, 면적대비 약국 수를 분석하는 것이다. 이것을 분석하고 시각화 하고자 하는 것이었다. 이는 그래프를 통해 표현함으로써 잘 구현해 냈다고 생각한다.

* 프로젝트를 진행하면서 여러 문제와 어려움을 겪었지만 자료 찾는 과정에서 배운게 많았다.


## 6) 결론: 프로젝트 목표를 이루었는지, 본인의 명제/논리가 증명/확인 되었는지 구체적으로 서술

* 이 프로젝트의 첫 번째 목표는 공공 데이터 포털의 파일 데이터와 오픈 API, 휴일지킴이약국 웹페이지의 데이터를 활용하여 주말이나 밤에 아파서 24시간 운영 약국 및 연중무휴 약국을 찾는 경우에 편리하게 사용할 수 있는 웹사이트를 개발하는 것이었다. 공공데이터를 활용하여 데이터를 수집하고 이를 가공하여 웹페이지의 틀 HTML, CSS, JS를 통해 구현하였다. 하지만 파이썬 크롤링을 공부한 것을 사용하지 못하였고 이로 인해 시간 분배의 문제를 겪었다. 

* 전국을 대상으로 하기엔 어려움이 있기 때문에 서울로 위치를 제한한다. 서울의 24시간 운영 약국을 한눈에 볼 수 있게 하는 기능을 제공하는 것이 목표이다. 네이버 클라우드 플랫폼의 Maps 네이버 지도 기능을 활용하여 제공하는 것이 목표였는데 이는 시도하지 못했다.

* 두 번째 목표는 휴일지킴이약국의 웹페이지를 크롤링하여 심야 운영 및 연중무휴 운영 약국을 데이터베이스화 한 후, 심야 운영 약국의 분포도 분석, 인구대비 약국 수, 면적대비 약국 수를 분석하는 것이다. 이것을 분석하고 시각화 하고자 하는 것이었다. 이는 그래프를 통해 표현함으로써 잘 구현해 냈다고 생각한다.

* 프로젝트를 진행하면서 여러 문제와 어려움을 겪었지만 자료 찾는 과정에서 배운게 많았다.

## 7) 오픈소스 활용한 부분 명시: 활용한 오픈소스의 출처와 본인 코드에서 활용한 부분 명시. 본인이 직접 구현한 부분 명시.

1. 웹페이지 기본틀 HTML, CSS, JS
    * StartBootstrap/startbootstrap-agency 
    * 오픈소스 활용
    https://github.com/startbootstrap/startbootstrap-agency
   
    * HTML은 형식에 맞게 Text를 변경하였고 CSS는 background Image와 포트폴리오 iamge를 변경하였고, 원하는 디자인으로 변경하였다.

 ## 8) 참고문헌: 프로젝트를 위해 획득한 자료, 인터넷 정보, 논문, 도서 등의 출처를 나열.

1. 획득한 자료
    * 공공데이터 포털: https://www.data.go.kr/iim/api/selectAPIAcountView.do
    * 강동구 https://data.go.kr/data/15040222/fileData.do
    * 중구 https://data.go.kr/data/3080366/fileData.do
2. 인터넷 정보
    * [Python Flask] 웹 페이지 만들기 01 - 환경 설정
    출처: https://kkamikoon.tistory.com/155 [컴퓨터를 다루다]
    * flask 프로젝트 생성, 세팅
    https://philosopher-chan.tistory.com/428
    * 서울열린데이터 광장 OpenAPI 사용법
    https://magician-of-c.tistory.com/38?category=250800
    * XML 접근 및 CSV 파일로 변환
    https://signing.tistory.com/31
    
3. 도서
    * Do it! 점프 투 파이썬 -박응용 지음-
